<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåü Th·ª≠ Th√°ch To√°n H·ªçc Sinh ƒê·ªông - L·ªõp 3</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/tone@14.7.77/build/Tone.js"></script>
</head>
<body>
    <!-- N√∫t ƒëi·ªÅu khi·ªÉn √¢m thanh -->
    <button id="soundToggle" class="sound-toggle pulse-glow" aria-label="B·∫≠t/t·∫Øt √¢m thanh">
        <span id="soundIcon">üîä</span>
    </button>

    <!-- Confetti Container -->
    <div id="confettiContainer" class="confetti-container"></div>

    <!-- M√†n h√¨nh b·∫Øt ƒë·∫ßu -->
    <div id="startScreen" class="screen active">
        <div class="container">
            <div class="game-card rainbow-border">
                <div class="title-section">
                    <h1 class="game-title gradient-text bounce-in">üßÆ‚ú® H·ªçc To√°n Si√™u Vui C√πng V∆∞∆°ng Khang ‚ú®üéØ</h1>
                    <p class="game-subtitle typing-text">D√†nh cho c√°c em h·ªçc sinh l·ªõp 3 th√¥ng minh! üåà</p>
                </div>
                
                <div class="input-section">
                    <div class="form-group">
                        <label for="playerName" class="form-label fun-label">üë¶üëß T√™n c·ªßa b·∫°n:</label>
                        <input type="text" id="playerName" class="form-control magical-input" placeholder="Nh·∫≠p t√™n si√™u nh√¢n to√°n h·ªçc..." maxlength="20">
                    </div>
                    
                    <!-- Section ch·ªçn s·ªë c√¢u h·ªèi -->
                    <div class="question-selection-section">
                        <h3 class="selection-title">üéØ Ch·ªçn S·ªë C√¢u H·ªèi:</h3>
                        <div class="question-options-grid">
                            <div class="question-option" data-value="10">
                                <div class="option-icon">‚ö°</div>
                                <div class="option-label">10 c√¢u</div>
                                <div class="option-time">7-10 ph√∫t</div>
                                <div class="option-description">Th·ª≠ s·ª©c nhanh</div>
                                <div class="difficulty-preview">
                                    <span class="diff-basic">4 ‚≠ê</span>
                                    <span class="diff-advanced">3 ‚≠ê‚≠ê</span>
                                    <span class="diff-expert">3 ‚≠ê‚≠ê‚≠ê</span>
                                </div>
                            </div>
                            <div class="question-option" data-value="15">
                                <div class="option-icon">üéØ</div>
                                <div class="option-label">15 c√¢u</div>
                                <div class="option-time">12-15 ph√∫t</div>
                                <div class="option-description">V·ª´a ph·∫£i</div>
                                <div class="difficulty-preview">
                                    <span class="diff-basic">6 ‚≠ê</span>
                                    <span class="diff-advanced">5 ‚≠ê‚≠ê</span>
                                    <span class="diff-expert">4 ‚≠ê‚≠ê‚≠ê</span>
                                </div>
                            </div>
                            <div class="question-option selected" data-value="20">
                                <div class="option-icon">üî•</div>
                                <div class="option-label">20 c√¢u</div>
                                <div class="option-time">15-20 ph√∫t</div>
                                <div class="option-description">Th√°ch th·ª©c</div>
                                <div class="difficulty-preview">
                                    <span class="diff-basic">8 ‚≠ê</span>
                                    <span class="diff-advanced">6 ‚≠ê‚≠ê</span>
                                    <span class="diff-expert">6 ‚≠ê‚≠ê‚≠ê</span>
                                </div>
                            </div>
                            <div class="question-option" data-value="30">
                                <div class="option-icon">üëë</div>
                                <div class="option-label">30 c√¢u</div>
                                <div class="option-time">25-30 ph√∫t</div>
                                <div class="option-description">Si√™u kh√≥</div>
                                <div class="difficulty-preview">
                                    <span class="diff-basic">12 ‚≠ê</span>
                                    <span class="diff-advanced">9 ‚≠ê‚≠ê</span>
                                    <span class="diff-expert">9 ‚≠ê‚≠ê‚≠ê</span>
                                </div>
                            </div>
                        </div>
                        <div class="difficulty-explanation">
                            <p><strong>üìã C·∫•u tr√∫c ƒë·ªÅ thi:</strong></p>
                            <div class="diff-breakdown">
                                <span class="diff-item basic">40% C∆° b·∫£n ‚≠ê</span>
                                <span class="diff-item advanced">30% N√¢ng cao ‚≠ê‚≠ê</span>
                                <span class="diff-item expert">30% Kh√≥ ‚≠ê‚≠ê‚≠ê</span>
                            </div>
                        </div>
                    </div>
                    
                    <button id="startBtn" class="btn btn--primary btn--lg btn--full-width magical-button">
                        üöÄ B·∫Øt ƒê·∫ßu Phi√™u L∆∞u To√°n H·ªçc! 
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- M√†n h√¨nh ch∆°i game -->
    <div id="gameScreen" class="screen">
        <div class="container">
            <div class="game-info">
                <div class="score-section rainbow-gradient">
                    <div class="score-item bounce-scale">
                        <span class="score-emoji">‚≠ê</span>
                        <span class="score-label">ƒêi·ªÉm s·ªë:</span>
                        <span id="currentScore" class="score-value glow-text">0</span>
                    </div>
                    <div class="score-item bounce-scale">
                        <span class="score-emoji">üéØ</span>
                        <span class="score-label">C√¢u h·ªèi:</span>
                        <span id="questionCounter" class="score-value glow-text">1 / 20</span>
                    </div>
                    <div class="score-item bounce-scale">
                        <span class="score-emoji">‚è±Ô∏è</span>
                        <span class="score-label">T·ªïng th·ªùi gian:</span>
                        <span id="totalTime" class="score-value glow-text">00:00</span>
                    </div>
                </div>
            </div>

            <div class="timer-section">
                <div class="timer-display magical-timer">
                    <span id="timerText" class="timer-number">20s</span>
                    <div class="timer-animation">
                        <div class="timer-circle">
                            <svg class="timer-svg" width="80" height="80">
                                <circle cx="40" cy="40" r="35" class="timer-bg"></circle>
                                <circle cx="40" cy="40" r="35" class="timer-progress" id="timerCircle"></circle>
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="timer-bar rainbow-timer">
                    <div id="timerProgress" class="timer-progress-bar"></div>
                </div>
            </div>

            <!-- Question difficulty indicator -->
            <div class="question-difficulty-indicator">
                <span id="questionDifficulty" class="difficulty-badge basic">‚≠ê C∆° b·∫£n</span>
                <span id="questionProgress" class="question-progress">C√¢u 1/20</span>
            </div>

            <div class="question-card magical-card slide-in">
                <div class="question-content">
                    <h2 id="questionText" class="question-title typing-effect">ƒêang t·∫°o c√¢u h·ªèi ma thu·∫≠t...</h2>
                    <div id="questionImage" class="question-image hidden bounce-in"></div>
                </div>
                <div class="answers-grid">
                    <button class="answer-btn color-blue magical-hover" data-answer="0">
                        <span class="answer-letter">A</span>
                        <span class="answer-text">ƒêang t·∫£i...</span>
                        <div class="answer-sparkle">‚ú®</div>
                    </button>
                    <button class="answer-btn color-green magical-hover" data-answer="1">
                        <span class="answer-letter">B</span>
                        <span class="answer-text">ƒêang t·∫£i...</span>
                        <div class="answer-sparkle">‚ú®</div>
                    </button>
                    <button class="answer-btn color-purple magical-hover" data-answer="2">
                        <span class="answer-letter">C</span>
                        <span class="answer-text">ƒêang t·∫£i...</span>
                        <div class="answer-sparkle">‚ú®</div>
                    </button>
                    <button class="answer-btn color-pink magical-hover" data-answer="3">
                        <span class="answer-letter">D</span>
                        <span class="answer-text">ƒêang t·∫£i...</span>
                        <div class="answer-sparkle">‚ú®</div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- M√†n h√¨nh k·∫øt th√∫c -->
    <div id="endScreen" class="screen">
        <div class="container">
            <div class="game-card victory-card">
                <div class="end-header">
                    <h1 class="end-title celebration-text">üéâ‚ú® Ho√†n Th√†nh Xu·∫•t S·∫Øc! ‚ú®üéâ</h1>
                    <div class="final-score">
                        <p class="score-text">K·∫øt qu·∫£ c·ªßa si√™u nh√¢n <span id="finalPlayerName" class="player-highlight"></span>:</p>
                        <div id="finalScore" class="score-display rainbow-text">0</div>
                        <div id="scoreMessage" class="score-message bounce-glow">Ch√∫c m·ª´ng!</div>
                    </div>
                </div>

                <!-- Th·ªëng k√™ chi ti·∫øt theo m·ª©c ƒë·ªô -->
                <div class="detailed-stats">
                    <h3 class="stats-title">üìä Th√†nh T√≠ch Theo M·ª©c ƒê·ªô</h3>
                    <div class="difficulty-stats-grid">
                        <div class="difficulty-stat-card basic-stat">
                            <div class="stat-difficulty-icon">‚≠ê</div>
                            <div class="stat-difficulty-label">C∆° b·∫£n</div>
                            <div class="stat-difficulty-score">
                                <span id="basicCorrect">0</span>/<span id="basicTotal">0</span>
                            </div>
                            <div class="stat-difficulty-percentage" id="basicPercentage">0%</div>
                        </div>
                        <div class="difficulty-stat-card advanced-stat">
                            <div class="stat-difficulty-icon">‚≠ê‚≠ê</div>
                            <div class="stat-difficulty-label">N√¢ng cao</div>
                            <div class="stat-difficulty-score">
                                <span id="advancedCorrect">0</span>/<span id="advancedTotal">0</span>
                            </div>
                            <div class="stat-difficulty-percentage" id="advancedPercentage">0%</div>
                        </div>
                        <div class="difficulty-stat-card expert-stat">
                            <div class="stat-difficulty-icon">‚≠ê‚≠ê‚≠ê</div>
                            <div class="stat-difficulty-label">Kh√≥</div>
                            <div class="stat-difficulty-score">
                                <span id="expertCorrect">0</span>/<span id="expertTotal">0</span>
                            </div>
                            <div class="stat-difficulty-percentage" id="expertPercentage">0%</div>
                        </div>
                    </div>
                </div>

                <!-- Th·ªëng k√™ t·ªïng quan -->
                <div class="general-stats">
                    <h3 class="stats-title">üìà Th·ªëng K√™ T·ªïng Quan</h3>
                    <div class="stats-grid">
                        <div class="stat-card correct-stats">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-value" id="correctAnswers">0</div>
                            <div class="stat-label">C√¢u ƒë√∫ng</div>
                        </div>
                        <div class="stat-card wrong-stats">
                            <div class="stat-icon">‚ùå</div>
                            <div class="stat-value" id="wrongAnswers">0</div>
                            <div class="stat-label">C√¢u sai</div>
                        </div>
                        <div class="stat-card time-stats">
                            <div class="stat-icon">‚è∞</div>
                            <div class="stat-value" id="finalTotalTime">00:00</div>
                            <div class="stat-label">T·ªïng th·ªùi gian</div>
                        </div>
                        <div class="stat-card average-stats">
                            <div class="stat-icon">üìà</div>
                            <div class="stat-value" id="averageTime">0s</div>
                            <div class="stat-label">TB m·ªói c√¢u</div>
                        </div>
                    </div>
                </div>

                <!-- ƒê√°nh gi√° th√†nh t√≠ch -->
                <div class="achievement-section">
                    <div id="achievementBadge" class="achievement-badge">
                        <div class="badge-icon">üèÜ</div>
                        <div class="badge-text">Xu·∫•t s·∫Øc!</div>
                    </div>
                    <div id="achievementMessage" class="achievement-message">
                        Th·∫≠t tuy·ªát v·ªùi! B·∫°n l√† thi√™n t√†i to√°n h·ªçc! üåü
                    </div>
                    <div id="suggestionMessage" class="suggestion-message">
                        <!-- G·ª£i √Ω c·∫£i thi·ªán s·∫Ω ƒë∆∞·ª£c t·∫°o b·ªüi JavaScript -->
                    </div>
                </div>

                <!-- B·∫£ng x·∫øp h·∫°ng -->
                <div class="leaderboard">
                    <h3 class="leaderboard-title">üèÜ B·∫£ng X·∫øp H·∫°ng Si√™u Sao</h3>
                    <div id="leaderboardList" class="leaderboard-list">
                        <!-- B·∫£ng x·∫øp h·∫°ng s·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                    </div>
                </div>

                <!-- N√∫t ƒëi·ªÅu khi·ªÉn v·ªõi ch·ª©c nƒÉng ƒë∆∞·ª£c s·ª≠a -->
                <div class="action-buttons">
                    <button id="newGameBtn" class="btn btn--primary btn--lg magical-button">
                        üÜï L√†m B√†i M·ªõi
                    </button>
                    <button id="practiceAgainBtn" class="btn btn--secondary btn--lg magical-button">
                        üîÑ Luy·ªán T·∫≠p L·∫°i
                    </button>
                    <button id="homeBtn" class="btn btn--outline btn--lg magical-button">
                        üè† V·ªÅ Trang Ch·ªß
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading overlay v·ªõi hi·ªáu ·ª©ng ma thu·∫≠t -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-content magical-loading">
            <div class="loading-spinner rainbow-spinner"></div>
            <div class="loading-text">
                <p class="loading-main">ƒêang t·∫°o c√¢u h·ªèi ma thu·∫≠t...</p>
                <p class="loading-sub">‚ú® Chu·∫©n b·ªã ph√©p thu·∫≠t to√°n h·ªçc ‚ú®</p>
            </div>
            <div class="loading-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>